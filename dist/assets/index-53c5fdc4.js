import{Engine as A,Render as E,Bodies as s,World as u,Runner as L,Sleeping as v,Body as F,Events as x}from"https://cdn.jsdelivr.net/npm/matter-js@0.18.0";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const y of o.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&l(y)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const c=[{label:"cherry",radius:40/2,color:"#F20306"},{label:"strawberry",radius:50/2,color:"#FF624C"},{label:"grape",radius:70/2,color:"#A969FF"},{label:"kumkwat",radius:85/2,color:"#FFAF02"},{label:"orange",radius:106/2,color:"#FC8611"},{label:"apple",radius:130/2,color:"#F41615"},{label:"pear",radius:140/2,color:"#FDF176"},{label:"peach",radius:196/2,color:"#FEB6AC"},{label:"pineapple",radius:220/2,color:"#F7E608"},{label:"melon",radius:270/2,color:"#89CE13"},{label:"watermelon",radius:300/2,color:"#26AA1E"}],p=A.create(),I=E.create({engine:p,element:document.getElementById("matter-canvas"),options:{wireframes:!1,background:"#F7F4C8",width:700,height:850}}),f=p.world,k=s.rectangle(310,820,800,60,{isStatic:!0,render:{fillStyle:"#f57196"}}),P=s.rectangle(15,395,30,790,{isStatic:!0,render:{fillStyle:"#f57196"}}),C=s.rectangle(685,395,30,790,{isStatic:!0,render:{fillStyle:"#f57196"}}),O=s.rectangle(310,100,720,2,{isStatic:!0,isSensor:!0,render:{fillStyle:"#f57196"},label:"topLine"});u.add(f,[k,P,C,O]);E.run(I);L.run(p);let n=null,m=null,i=null,d=!1,S=0;function g(){const t=B(),e=s.circle(300,50,t.radius,{label:t.label,isSleeping:!0,render:{fillStyle:t.color,sprite:{texture:`/${t.label}.jpeg`}},restitution:.2});n=e,m=t,u.add(f,e)}function B(){const t=Math.floor(Math.random()*5),e=c[t];return m&&m.label===e.label?B():e}window.onkeydown=t=>{if(!d)switch(t.code){case"ArrowLeft":if(i)return;i=setInterval(()=>{n.position.x-20>25&&F.setPosition(n,{x:n.position.x-1,y:n.position.y})},1);break;case"ArrowRight":if(i)return;i=setInterval(()=>{n.position.x+20<650&&F.setPosition(n,{x:n.position.x+1,y:n.position.y})},1);break;case"Space":d=!0,v.set(n,!1),setTimeout(()=>{g(),d=!1},1e3)}};window.onkeyup=t=>{switch(t.code){case"ArrowLeft":case"ArrowRight":clearInterval(i),i=null}};x.on(p,"collisionStart",t=>{t.pairs.forEach(e=>{if(e.bodyA.label===e.bodyB.label){u.remove(f,[e.bodyA,e.bodyB]);const a=c.findIndex(o=>o.label===e.bodyA.label);if(a===c.length-1)return;const l=c[a+1],r=s.circle(e.collision.supports[0].x,e.collision.supports[0].y,l.radius,{render:{fillStyle:l.color},label:l.label});u.add(f,r),S+=25,M()}(e.bodyA.label==="topLine"||e.bodyB.label==="topLine")&&!d&&(alert("Game over"),window.location.reload())})});function M(){const t=document.getElementById("score");t.textContent=`Score: ${S}`}g();console.log(g);const R=document.getElementById("pause-button"),h=document.getElementById("pause-menu"),N=document.getElementById("resume-button"),W=document.getElementById("restart-button");let b=!1;function w(){b?(h.style.display="none",b=!1):(h.style.display="block",b=!0)}R.addEventListener("click",w);N.addEventListener("click",w);W.addEventListener("click",()=>{window.location.reload()});document.addEventListener("keydown",t=>{t.key==="Escape"&&w()});
